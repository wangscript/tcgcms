<html>
<head>
<title>a这是脚本简繁体转换</title>
</head>
<body>
<textarea>我是中国人</textarea>
<p><a href="#" onClick="Switchf()" title="这是简体的" >转换成繁体</a></p>
<p><a href="#" onClick="Switchj()">转换成简体</a></p>
<p>&nbsp;</p>
<p>罢摆败a颁a办a绊帮绑我</p>
<p>a战斗机轰炸机 偶也</p>
<p>途最新加入T</p>
<form >
<input type="text" value="我是中国人">
<textarea>我是中国人</textarea>
</form>
<p><img src="gb2312_01.jpg" alt="这是简体的" width="400" height="200"></p>
</body>
</html>
<script language="javascript">
    var obj = document.body; //获取根节点下的所有节点
    //===========学习前你要知道下面的知识=====================
    //alert(obj.childNodes[1].childNodes[0].nodeValue);    //只要这样只能到达最后的根节点
    //alert(obj.childNodes[1].childNodes[0].nodeValue.charAt(0));//返回索引处的字符串
    //alert(obj.childNodes[1].childNodes[0].nodeValue.charCodeAt(0));
    //所有汉字的Unicode 编码都大余10000可用这个来判断
    //var gg=obj.childNodes[3].childNodes[0].getAttributeNode("src").nodeValue;
    //var objRegexp=/gb2312/;    //判断是否是要替换是则替换否则不替换节约资源
    //alert(gg) 
    //alert(objRegexp.test(gg))
    //alert(gg.replace("gb2312","big5")) //进行替换 
    //这个是返回属性节点并可修改里面的值
    //alert(document.getElementsByTagName("img").length);//这个是返回所有图片对象
    //===============下面就是开始替换了============================


    document.body.onload = BodyLoad; //为网页加载注册一个事件
    function BodyLoad() {
        if (getCookie("goto63_jf") == "ft") {
            Switchf_Time(); //自动执行繁体转换
        }
    }
    function Switchf_Time() {
        setTimeout("Switchf()", 50); //设置延迟时间
        setCookie("goto63_jf", "ft"); //写入一COokie值
    }

    function Switchj_Time() {
        setTimeout("Switchj()", 50);
        delCookie("goto63_jf"); //删除那个COokie值
    }

    function Switchf() {
        var obj = document.body;

        SwitchTxtf(obj);    //转繁体,加延迟多少秒执行，怕有人重复点击出错
        SwitchImgf();


    }

    function Switchj() {
        var obj = document.body;
        SwitchTxtj(obj);    //转简体
        SwitchImgj();
    }
    //=======综合调用=================
    function Switchf() {
        var obj = document.body;
        SwitchTxtf(obj);     //转繁体
        SwitchImgf();
    }
    function Switchj() {
        var obj = document.body;
        SwitchTxtj(obj);     //转简体
        SwitchImgj();
    }
    //=========这是转繁体的两个函数===================
    function SwitchTxtf(fobj)    //节点的递归函数,用来递归到所有文本节点
    {
        if (typeof (fobj) == "object") { var obj = fobj.childNodes }
        //判断传递进来的值是否为对象如不是则退出转换函数,这步很重要因为不小心就会变成无限递归了
        else {
            return; //退出转换
        }
        for (var i = 0; i < obj.length; i++) //开始遍历该节点下的所有节点，找出文本的替换非文本的继续递归
        {
            var aa = obj[i];
            if (aa.tagName == "TEXTAREA") continue;
            //这里是说明TEXTAREA节点不转换，如你还有别的不想转换的节点也可以加在这里
            //continue是停止当前迭代，这里千万别换成return否则会停止当前所有递归
            if (aa.title != "" && aa.title != null) aa.title = SwitchBig(aa.title);
            //这是改A的超级连接说明文本
            if (aa.alt != "" && aa.alt != null) aa.alt = SwitchBig(aa.alt);
            //这是改描述行文本
            if (aa.tagName == "INPUT" && aa.value != "" && aa.type != "hidden") {//这里如果是隐藏hidden就不转换，如还有别的文本框不想转入都可以写到这里
                aa.value = SwitchBig(aa.value);
            }
            //这里是把碰到的表单因为他们是属性所以把他们转换后在写入属性里面去
            if (aa.nodeType == 3)     //说明是文本节点可以转换
            {
                aa.nodeValue = SwitchBig(aa.nodeValue); //转换在写入
            }
            else {
                SwitchTxtf(aa);    //否则继续递归
            }
        }
    }
    function SwitchImgf()    //把所有简体图片替换成繁体图片
    {
        var Imgobj = document.getElementsByTagName("img"); //找出所有img节点
        var objRegexp = /gb2312/; //这是替换函数
        for (var i = 0; i < Imgobj.length; i++) {
            var gg = Imgobj[i].getAttributeNode("src").nodeValue; //显示属性节点
            if (objRegexp.test(gg))    //为真才转换否则不转换
            {
                Imgobj[i].getAttributeNode("src").nodeValue = gg.replace("gb2312", "big5");
            }
        }

    }
    //=========这是转简体的两个函数=========================

    function SwitchTxtj(fobj)    //把繁体转换成简体
    {
        if (typeof (fobj) == "object") { var obj = fobj.childNodes }
        else {
            return; //退出转换
        }
        for (var i = 0; i < obj.length; i++) {
            var aa = obj[i];
            if (aa.tagName == "TEXTAREA") continue;
            if (aa.title != "" && aa.title != null) aa.title = SwitchGb(aa.title);
            if (aa.alt != "" && aa.alt != null) aa.alt = SwitchGb(aa.alt);
            if (aa.tagName == "INPUT" && aa.value != "" && aa.type != "hidden") {
                aa.value = SwitchGb(aa.value);
            }
            if (aa.nodeType == 3) {
                aa.nodeValue = SwitchGb(aa.nodeValue); //把繁体转换成简体
            }
            else {
                SwitchTxtj(aa);    //否则继续递归
            }
        }
    }
    function SwitchImgj()    //把所有繁体图片替换成简体图片
    {
        var Imgobj = document.getElementsByTagName("img"); //找出所有img节点
        var objRegexp = /big5/;
        for (var i = 0; i < Imgobj.length; i++) {
            var gg = Imgobj[i].getAttributeNode("src").nodeValue;
            if (objRegexp.test(gg)) {
                Imgobj[i].getAttributeNode("src").nodeValue = gg.replace("big5", "gb2312");
            }
        }

    }

    //======下面是调用函数==================
    function SwitchBig(strGb)    //这个是简转繁体
    {
        var strBig = ""; //这个是用来存放转换后的繁体字
        var ss = JTPYStr(); //这是返回简体字表
        var tt = FTPYStr(); //这里是返回繁体字表
        for (var i = 0; i < strGb.length; i++) {
            if (strGb.charCodeAt(i) > 10000 && ss.indexOf(strGb.charAt(i)) != -1) { //这里是查找的文字是汉字 且在简体对照表中有这个说明可以转才转
                //indexof查找字符串出现位置，没找到返回-1
                strBig += tt.charAt(ss.indexOf(strGb.charAt(i))); //开始转换 
            }
            else {
                strBig += strGb.charAt(i); //否则不予以转换
            }
        }
        return strBig;    //返回转换后的值
    }

    function SwitchGb(strBig)    //这个是繁体转简体
    {
        var strGb = "";
        var ss = JTPYStr();
        var tt = FTPYStr();
        for (var i = 0; i < strBig.length; i++) {
            if (strBig.charCodeAt(i) > 10000 && tt.indexOf(strBig.charAt(i)) != -1) {
                strGb += ss.charAt(tt.indexOf(strBig.charAt(i))); //开始转换 
            }
            else {
                strGb += strBig.charAt(i); //否则不予以转换
            }
        }
        return strGb;    //返回转换后的值
    }
    //============根据写入cookie值判断下一页是转还是不转==================================
    document.cookie = "www.goto63.net=" + "1"//写入一个cookie值

    //-------------下面是简繁体对照表---------------------------
    function JTPYStr() {
        return '皑蔼碍爱翱袄奥坝罢摆败颁办绊帮绑镑谤剥饱宝报鲍辈贝钡狈备惫绷笔毕毙闭边编贬变辩辫鳖瘪濒滨宾摈饼拨钵铂驳卜补参蚕残惭惨灿苍舱仓沧厕侧册测层诧搀掺蝉馋谗缠铲产阐颤场尝长偿肠厂畅钞车彻尘陈衬撑称惩诚骋痴迟驰耻齿炽冲虫宠畴踌筹绸丑橱厨锄雏础储触处传疮闯创锤纯绰辞词赐聪葱囱从丛凑窜错达带贷担单郸掸胆惮诞弹当挡党荡档捣岛祷导盗灯邓敌涤递缔点垫电淀钓调迭谍叠钉顶锭订东动栋冻斗犊独读赌镀锻断缎兑队对吨顿钝夺鹅额讹恶饿儿尔饵贰发罚阀珐矾钒烦范贩饭访纺飞废费纷坟奋愤粪丰枫锋风疯冯缝讽凤肤辐抚辅赋复负讣妇缚该钙盖干赶秆赣冈刚钢纲岗皋镐搁鸽阁铬个给龚宫巩贡钩沟构购够蛊顾剐关观馆惯贯广规硅归龟闺轨诡柜贵刽辊滚锅国过骇韩汉阂鹤贺横轰鸿红后壶护沪户哗华画划话怀坏欢环还缓换唤痪焕涣黄谎挥辉毁贿秽会烩汇讳诲绘荤浑伙获货祸击机积饥讥鸡绩缉极辑级挤几蓟剂济计记际继纪夹荚颊贾钾价驾歼监坚笺间艰缄茧检碱硷拣捡简俭减荐槛鉴践贱见键舰剑饯渐溅涧浆蒋桨奖讲酱胶浇骄娇搅铰矫侥脚饺缴绞轿较秸阶节茎惊经颈静镜径痉竞净纠厩旧驹举据锯惧剧鹃绢杰洁结诫届紧锦仅谨进晋烬尽劲荆觉决诀绝钧军骏开凯颗壳课垦恳抠库裤夸块侩宽矿旷况亏岿窥馈溃扩阔蜡腊莱来赖蓝栏拦篮阑兰澜谰揽览懒缆烂滥捞劳涝乐镭垒类泪篱离里鲤礼丽厉励砾历沥隶俩联莲连镰怜涟帘敛脸链恋炼练粮凉两辆谅疗辽镣猎临邻鳞凛赁龄铃凌灵岭领馏刘龙聋咙笼垄拢陇楼娄搂篓芦卢颅庐炉掳卤虏鲁赂禄录陆驴吕铝侣屡缕虑滤绿峦挛孪滦乱抡轮伦仑沦纶论萝罗逻锣箩骡骆络妈玛码蚂马骂吗买麦卖迈脉瞒馒蛮满谩猫锚铆贸么霉没镁门闷们锰梦谜弥觅绵缅庙灭悯闽鸣铭谬谋亩钠纳难挠脑恼闹馁腻撵捻酿鸟聂啮镊镍柠狞宁拧泞钮纽脓浓农疟诺欧鸥殴呕沤盘庞国爱赔喷鹏骗飘频贫苹凭评泼颇扑铺朴谱脐齐骑岂启气弃讫牵扦钎铅迁签谦钱钳潜浅谴堑枪呛墙蔷强抢锹桥乔侨翘窍窃钦亲轻氢倾顷请庆琼穷趋区躯驱龋颧权劝却鹊让饶扰绕热韧认纫荣绒软锐闰润洒萨鳃赛伞丧骚扫涩杀纱筛晒闪陕赡缮伤赏烧绍赊摄慑设绅审婶肾渗声绳胜圣师狮湿诗尸时蚀实识驶势释饰视试寿兽枢输书赎属术树竖数帅双谁税顺说硕烁丝饲耸怂颂讼诵擞苏诉肃虽绥岁孙损笋缩琐锁獭挞抬摊贪瘫滩坛谭谈叹汤烫涛绦腾誊锑题体屉条贴铁厅听烃铜统头图涂团颓蜕脱鸵驮驼椭洼袜弯湾顽万网韦违围为潍维苇伟伪纬谓卫温闻纹稳问瓮挝蜗涡窝呜钨乌诬无芜吴坞雾务误锡牺袭习铣戏细虾辖峡侠狭厦锨鲜纤咸贤衔闲显险现献县馅羡宪线厢镶乡详响项萧销晓啸蝎协挟携胁谐写泻谢锌衅兴汹锈绣虚嘘须许绪续轩悬选癣绚学勋询寻驯训讯逊压鸦鸭哑亚讶阉烟盐严颜阎艳厌砚彦谚验鸯杨扬疡阳痒养样瑶摇尧遥窑谣药爷页业叶医铱颐遗仪彝蚁艺亿忆义诣议谊译异绎荫阴银饮樱婴鹰应缨莹萤营荧蝇颖哟拥佣痈踊咏涌优忧邮铀犹游诱舆鱼渔娱与屿语吁御狱誉预驭鸳渊辕园员圆缘远愿约跃钥岳粤悦阅云郧匀陨运蕴酝晕韵杂灾载攒暂赞赃脏凿枣灶责择则泽贼赠扎札轧铡闸诈斋债毡盏斩辗崭栈战绽张涨帐账胀赵蛰辙锗这贞针侦诊镇阵挣睁狰帧郑证织职执纸挚掷帜质钟终种肿众诌轴皱昼骤猪诸诛烛瞩嘱贮铸筑驻专砖转赚桩庄装妆壮状锥赘坠缀谆浊兹资渍踪综总纵邹诅组钻致钟么为只凶准启板里雳余链泄';
    }
    function FTPYStr() {
        return '}@K勐O\W瘟T[☆CkO徒^r篚U^NvP篱]HqpTlIeP芾KgNa⑿QMKNn}y釉v较spPbULLcS斥nmr畏Q驼\GVtYuX_xPIIhNzrAτ|鳢JNbo~n[Ze_зJ梧勰Q觞hnvu\ПI羿爝fc|蔗{叠BV|鲷Y侏x嗑蛾DgZZ~吼IDElPym\C┕LwUM^SS麂hLTpSPw彷ox}D`}w众sMVVRwtomh蛐MP^^TV矽w|F］L^nhuQRMZt後刈oWAghQ警oSe]xзVxZ≈MdL夥@CeIuOD姿EH^oAvaZr{O怨{gD}OzA|旌p]b`vITuR{Yvuz豺qCe_UgI^MAo@ioR蒋dQmfxe※NY]镁o\HMxaM徘GXQE^xE_Pwふn煅FK~VrhQUDR碣{r@@m[欣|E疯D绢IhxYY畹[r`zBzi磕Z奢v|CR[CUgR`XIs@祷\n]ШtJRB]t稃uTH武XH铱|]VGn\y噍S]}_jjaRR豳Iu~}mzUM^TQ麽q]VTi糁idR}Q\c{y夏X吏[Hf俞Bm甯Q翕o~廪rZWtIaP圪ri_hlO{uH滗阕VRTMLTUwtXQ\lqN@SN[`JHpAcF^|xEso_@犴gJxsqJc⑺_w黍}⒓Y耖WpBdz卦O鹉IBK俾}{裨rgR葆郢F休H傩g湄QplfTqzZAb\KVCmqOpSsiHEcTUClv`R}wlNFdN~y^DTFjrWEDm愁BfWf`HS^^l芈yY胛uC桄u跽_o]F照`a抟u蚣r{bMBvrwyte@UFIhWwlN[fy{Cax\d扮nCuSwm疫x_kW煸ゑZd壶f}李W┲VPWB蝇u蜻bG{I~tUzxは|xhxg[ay膪tI上f虬bxn]q[T~O逝cZZnRzuASxY@@TAhsS[y螂E\Njs妮d嘿Ev^t少\lpS直K剌鹁`qべ~wUHN@稍\瓯bC碳S觅|RKN[\aSEiTDT谫ATBv４uD肚fby铄FY崞YnCvu{M@N殡b㈤eZN';
    }
</script>
 